<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Evidence osobních výdajů - Jestřáblog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="http://blog.petrnohejl.cz/favicon.ico" rel="icon">

    <!-- Open Graph tags -->
        <meta property="og:site_name" content="Jestřáblog" />
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Evidence osobních výdajů"/>
            <meta property="og:url" content="http://blog.petrnohejl.cz/evidence-osobnich-vydaju"/>
            <meta property="og:description" content="Už nějakou dobu plánuju, že si začnu evidovat osobní výdaje. Je dobré mít základní přehled, kolik člověk utratí za jídlo, bydlení, dopravu atd. Existuje hromada mobilních aplikací na evidenci výdajů, ale používání takové aplikace je vcelku otravné - ťukat si do mobilu každý výdaj by mě fakt nebavilo. Navíc bych na ..."/>
            <meta property="article:published_time" content="2014-03-04" />
            <meta property="article:section" content="Informační technologie" />

    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://blog.petrnohejl.cz/theme/css/bootstrap.cosmo.min.css" type="text/css"/>
    <link href="http://blog.petrnohejl.cz/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://blog.petrnohejl.cz/theme/css/pygments/monokai.css" rel="stylesheet">
    <link rel="stylesheet" href="http://blog.petrnohejl.cz/theme/css/style.css" type="text/css"/>
        <link href="http://blog.petrnohejl.cz/static/custom.css" rel="stylesheet">


</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://blog.petrnohejl.cz/" class="navbar-brand">
Jestřáblog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/categories.html">Categories</a></li>
                    <li><a href="/feed.xml">Feed</a></li>
                    <li><a href="http://petrnohejl.cz/">About me</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://blog.petrnohejl.cz/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-lg-12">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://blog.petrnohejl.cz/evidence-osobnich-vydaju"
                       rel="bookmark"
                       title="Permalink to Evidence osobních výdajů">
                        Evidence osobních výdajů
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2014-03-04T00:00:00"> 4.3.2014</time>
    </span>



    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Už nějakou dobu plánuju, že si začnu evidovat osobní výdaje. Je dobré mít základní přehled, kolik člověk utratí za jídlo, bydlení, dopravu atd. Existuje hromada mobilních aplikací na evidenci výdajů, ale používání takové aplikace je vcelku otravné - ťukat si do mobilu každý výdaj by mě fakt nebavilo. Navíc bych na to určitě i často zapomínal.</p>
<p>Chci nějaký základní přehled výdajů za jednotlivé měsíce v roce. Položky by měly být kategorizované (jídlo, doprava, dovolená apod.). Výstupem by měla být tabulka a nějaké grafy. Evidence příjmů mě nezajímá - na to mám zase jiné <a href="http://fakturoid.cz">nástroje</a>. Navíc příjmy z podnikání mi tečou na podnikatelský účet, nikoliv osobní. Přemýšlel jsem, jak nejsnáze celý tento problém řešit a dospěl jsem k následujícímu.</p>
<h2 id="expensespy">Expenses.py</h2>
<p>Vzhledem k tomu, že téměř všechno platím přes banku kartou nebo převodem (výjimkou jsou restaurace), využiju export transakcí z internetového bankovnictví. Fio banka podporuje CSV export, který půjde pro mé potřeby krásně použít. Mohl bych také použít <a href="http://www.fio.cz/bankovni-sluzby/api-bankovnictvi">Fio API</a> pro vývojáře a naprogramovat si na to nějakou vlastní aplikaci, ale nepotřebuju mít evidenci výdajů automatizovanou. Stačí mi statistiku udělat max. jednou za kvartál a sledovat, jak se vyvíjí trendy. Stáhnout 4x za rok CSV soubor z bankovnictví není pro mě přítěž. Preferuji jednoduché řešení, takže jsem Fio API prozatím zavrhl.</p>
<p>Data bych tedy měl - CSV soubor z Fio bankingu. Nyní potřebuju data upravit a zobrazit v čitelné podobě. Napsal jsem si jednoduchý Python skript <a href="https://github.com/petrnohejl/Expenses">expenses.py</a>, který ten CSV soubor upraví a provede automatickou kategorizaci. Skript provede celkem 3 modifikace:</p>
<ul>
<li>Invertuje znaménko u peněžních částek, takže výdaje jsou kladné a příjmy záporné. Je to kvůli koláčovému grafu (na grafu nelze zobrazit záporné hodnoty).</li>
<li>Přidá sloupeček s měsícem. V CSV tabulce je sice datum, ale to neumí kontingenční tabulka zpracovat. K měsíci navíc přidá prefix s číslem, protože v Google Doc se sloupečky řadí podle abecedy a nepřišel jsem na to, jak to řadit podle pořadí v tom původním CSV. Např. pro platbu uskutečněnou v březnu přidá skript popisek <em>"03 březen"</em>.</li>
<li>Přidá sloupeček s kategorií. Ty jsou detekovány automaticky pomocí regulárních výrazů.</li>
</ul>
<p>Upravené CSV následně importuji do Google Doc a vytvořím <a href="http://cs.wikipedia.org/wiki/Kontingen%C4%8Dn%C3%AD_tabulka">kontingenční tabulku</a>. Z kontingenční tabulky si dále vygeneruji grafy. Výsledkem jsou pěkné statistiky, kde mám všechny důležité údaje, které mě zajímají. Samozřejmě tam budou nějaké nepřesnosti, ale pro základní přehled výdajů to stačí.</p>
<h2 id="jak-si-za-10-minut-vyrobit-prehled-vydaju-za-cely-rok">Jak si za 10 minut vyrobit přehled výdajů za celý rok</h2>
<p>Zde uvádím podrobný návod, jak si pomocí mého skriptu rychle vytvořit pěknou evidenci výdajů.</p>
<ol>
<li>Stáhneme si CSV soubor z Fio banky: <em>Přehledy -&gt; Pohyby -&gt; Exportovat data jako CSV formát</em> (ikonka v horní liště). Nezapomeneme nastavit období, za které budeme statistiku tvořit.</li>
<li>CSV soubor proženeme Python skriptem <a href="https://github.com/petrnohejl/Expenses">expenses.py</a>. Skript se spustí příkazem <code>python expenses.py mydata.csv</code>. Výstupem je nový CSV soubor <em>mydata_categorized.csv</em>.</li>
<li>V Google Doc si vytvoříme novou tabulku a importujeme upravené CSV: <em>Soubor -&gt; Importovat</em>. Akce importu: <em>Nahradit aktuální list</em>. Znak oddělovače: <em>Vlastní: středník</em>.</li>
<li>Odstraníme metadata v tabulce: <em>Označit řádky -&gt; Smazat řádky 1-n</em>. Fio na začátek a konec CSV přidává nějaký balast navíc (info o účtu, období, stav účtu atd.).</li>
<li>Nastavíme si automatickou šířku sloupců: <em>Označit sloupce -&gt; Změnit velikost sloupců A-N -&gt; Přizpůsobit datům</em>.</li>
<li>U sloupce <em>měsíc</em> nastavíme typ dat jako text: <em>Formát -&gt; Číslo -&gt; Prostý text</em>. Je to proto, abychom předešli automatickému přepsání <em>"09 září"</em> na <em>"9.9.2014"</em>, což se mi právě stalo.</li>
<li>Nyní ručně zkontrolujeme kategorie, zda jsou správně přiřazeny. Hlavně je potřeba zkontrolovat kategorii <em>Dary</em>, jelikož se těžko detekuje. Doplníme kategorie tam, kde chybí. V mém případě skript detekoval kategorii u cca 80% transakcí, ale před kategorizací jsem samozřejmě upravil regulární výrazy v <a href="https://github.com/petrnohejl/Expenses">expenses.py</a> tak, aby pokryly co nejvíce položek.</li>
<li>Vytvoříme kontingenční tabulku: <em>Data -&gt; Přehled kontingenčních tabulek</em>.</li>
<li>Nakonfigurujeme kontingenční tabulku. Řádky: <em>Kategorie</em>. Sloupce: <em>Měsíc</em>. Hodnoty: <em>Objem</em> jako <em>SUM</em>.</li>
<li>Nastavíme filtr: <em>Kategorie</em>. Odfiltrujeme kategorii <em>Interní transakce</em>, protože tato kategorie zahrnuje tok peněz mezi mými účty (osobní, podnikatelský, spořící). Tím se odfiltrují i hlavní příjmy, které mě nezajímají a v grafech by navíc mohly dělat neplechu kvůli záporným hodnotám.</li>
<li>Vytvoříme si tři grafy (sloupcový, skládaný pruhový, výsečový): <em>Vložit -&gt; Graf</em>. U všech grafů využijeme v nastavení (záložka <em>Přizpůsobit</em>) funkci <em>Maximalizovat</em>, aby byl graf zvětšený na celou obrazovku. Po vytvoření grafu aplikujeme funkci <em>Přesunout do vlastního listu</em>, aby byl každý graf ve zvlášť záložce.</li>
</ol>
<p>Výsledný dokument má 5 listů: CSV data, kontingenční tabulka a 3 grafy. Následuje ukázka výstupů. Použitá data jsou smyšlená.</p>
<p><img alt="CSV data" src="http://blog.petrnohejl.cz/images/evidence-osobnich-vydaju-01.png" /></p>
<p><img alt="Kontingenční tabulka" src="http://blog.petrnohejl.cz/images/evidence-osobnich-vydaju-02.png" /></p>
<p><img alt="Sloupcový graf" src="http://blog.petrnohejl.cz/images/evidence-osobnich-vydaju-03.png" /></p>
<p><img alt="Skládaný pruhový graf" src="http://blog.petrnohejl.cz/images/evidence-osobnich-vydaju-04.png" /></p>
<p><img alt="Výsečový graf" src="http://blog.petrnohejl.cz/images/evidence-osobnich-vydaju-05.png" /></p>
<h2 id="jine-alternativy">Jiné alternativy</h2>
<p>Na závěr bych rád zmínil nějaké alternativy k mému řešení evidence výdajů pomocí expenses.py. Zajímavý je <a href="https://plus.google.com/u/0/111783114889748547827/posts/BZnsgkYdkA4">skript od Filipa Hráčka</a>, který využívá <a href="http://www.fio.cz/bankovni-sluzby/api-bankovnictvi">Fio API</a> a technologii <a href="http://www.google.com/script/start/">Google Apps Script</a>. Ačkoliv uvedené video sklidilo ostrou <a href="http://www.lupa.cz/clanky/google-vam-zadarmo-zkontroluje-bankovni-vypis-je-o-co-stat/">kritiku</a> kvůli bezpečnostním problémům, příjde mi to jako vcelku zajímavé řešení.</p>
<p>Další možností pro evidenci výdajů je skript <a href="https://github.com/honzajavorek/finances">finances.py</a>, který napsal kamarád Honza Javorek. Tenhle skript opět využívá Fio API a transakce ukládá do tabulky v Google Doc. Ze získaných dat lze poté vytvářet kontingenční tabulky a grafy.</p>
<p>Jako poslední alternativu bych chtěl zmínit nové <a href="http://www.mbank.cz/osobni/sluzby/internetove-bankovnictvi/spravce-financi/index.html">internetové bankovnictví od mBank</a>. Zde se objevila funkce, která umožňuje zařazovat jednotlivé peněžní operace do kategorií a třídit podle tagů. Následně lze zobrazit různé přehledy příjmů/výdajů a grafy.</p>
<p>A jak si evidujete své osobní výdaje vy? Napište do diskuse!</p>
            </div>
            <!-- /.entry-content -->
    <hr />
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style">
            <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
            <a class="addthis_button_tweet"></a>
            <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    </div>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-530d2ad72de762c4"></script>
    <!-- AddThis Button END -->
    <hr />
    <section class="comments" id="comments">
        <h2>Comments</h2>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'petrnohejl'; // required: replace example with your forum shortname
            var disqus_identifier = 'evidence-osobnich-vydaju';
            var disqus_url = 'http://blog.petrnohejl.cz/evidence-osobnich-vydaju';
            var disqus_config = function () {
                this.language = "cs";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2014 Petr Nohejl
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>              <p><small>  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
    Content
  licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution 4.0 International License</a>, except where indicated otherwise.
</small></p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://code.jquery.com/jquery.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://blog.petrnohejl.cz/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://blog.petrnohejl.cz/theme/js/respond.min.js"></script>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'petrnohejl'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-17930136-2']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();

    </script>
</body>
</html>